<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Alpha</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Mono', Consolas, monospace;
            background: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid #2a2a2a;
            margin-bottom: 30px;
        }
        .claude-logo {
            display: none;
        }
        h1 {
            font-size: 2.5rem;
            color: #e0e0e0;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .timestamp {
            color: #888;
            font-size: 0.9rem;
        }
        .powered-by {
            display: inline-block;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #666;
        }
        .powered-by .anthropic {
            color: #fff;
            font-weight: 600;
        }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-card {
            background: #141414;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #2a2a2a;
        }
        .summary-card h3 {
            color: #777;
            font-size: 0.85rem;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        .summary-card .value {
            font-size: 2rem;
            font-weight: bold;
        }
        .buy-count { color: #4a4; }
        .hold-count { color: #aa4; }
        .nobuy-count { color: #a44; }

        .section-title {
            font-size: 1.5rem;
            margin: 30px 0 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2a2a2a;
            color: #e0e0e0;
        }

        .portfolio-allocation {
            background: #141414;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #2a2a2a;
        }
        .allocation-bar {
            display: flex;
            height: 40px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .allocation-segment {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }
        .allocation-segment:hover {
            filter: brightness(1.3);
            transform: scaleY(1.1);
        }
        html {
            scroll-behavior: smooth;
        }
        tr:target {
            background: #1a2a1a !important;
        }

        .recommendations-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            margin-bottom: 30px;
        }
        .recommendations-table th {
            text-align: left;
            padding: 12px 10px;
            background: #0a0a0a;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.7rem;
            border-bottom: 1px solid #2a2a2a;
            position: sticky;
            top: 0;
        }
        .recommendations-table td {
            padding: 10px;
            border-bottom: 1px solid #1a1a1a;
            vertical-align: middle;
        }
        .recommendations-table tr:hover {
            background: #1a1a1a;
        }
        .recommendations-table tr:target {
            background: #1a2a1a;
        }
        .stock-ticker {
            font-weight: bold;
            color: #e0e0e0;
            font-size: 1rem;
        }
        .stock-name {
            font-size: 0.7rem;
            color: #555;
        }
        .recommendation-badge {
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            display: inline-block;
        }
        .badge-buy {
            background: #2a5a2a;
            color: #6c6;
        }
        .badge-nobuy {
            background: #5a2a2a;
            color: #c66;
        }
        .badge-hold {
            background: #5a5a2a;
            color: #cc6;
        }
        .allocation-pct {
            font-weight: bold;
            color: #e0e0e0;
            font-size: 1.1rem;
        }
        .conviction-cell {
            color: #888;
        }
        .price-cell {
            color: #e0e0e0;
        }
        .target-cell {
            color: #888;
        }
        .upside-positive {
            color: #4a4;
            font-weight: 500;
        }
        .upside-negative {
            color: #a44;
            font-weight: 500;
        }
        .justification-cell {
            font-size: 0.75rem;
            color: #4a4;
            max-width: 300px;
        }
        .risks-cell {
            font-size: 0.7rem;
            color: #a44;
            max-width: 200px;
        }
        .table-section {
            background: #141414;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
            border: 1px solid #2a2a2a;
            overflow-x: auto;
        }

        .history-section {
            background: #141414;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #2a2a2a;
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        .history-table th {
            text-align: left;
            padding: 12px;
            background: #0a0a0a;
            color: #777;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
        }
        .history-table td {
            padding: 12px;
            border-bottom: 1px solid #2a2a2a;
        }
        .history-table tr:hover {
            background: #1a1a1a;
        }

        .category-section {
            margin-bottom: 40px;
        }
        .category-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .category-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: #2a2a2a;
        }
        .cat-ai { background: #2a2a2a; }
        .cat-energy { background: #2a2a2a; }
        .cat-storage { background: #2a2a2a; }
        .cat-bigtech { background: #2a2a2a; }
        .cat-cyber { background: #2a2a2a; }

        footer {
            text-align: center;
            padding: 30px;
            color: #555;
            font-size: 0.85rem;
            border-top: 1px solid #2a2a2a;
            margin-top: 40px;
        }
        footer a {
            color: #e0e0e0;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .recommendations-grid {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Claude Alpha</h1>
            <p class="timestamp">Last Updated: <span id="lastUpdate"></span></p>
            <p class="timestamp">Next Update: Daily at market close</p>
        </header>

        <div class="summary-cards">
            <div class="summary-card">
                <h3>Total Stocks Analyzed</h3>
                <div class="value" id="totalStocks">18</div>
            </div>
            <div class="summary-card">
                <h3>Buy Recommendations</h3>
                <div class="value buy-count" id="buyCount">13</div>
            </div>
            <div class="summary-card">
                <h3>No Buy</h3>
                <div class="value nobuy-count" id="noBuyCount">5</div>
            </div>
            <div class="summary-card">
                <h3>Avg Conviction</h3>
                <div class="value" id="avgConviction">7.5/10</div>
            </div>
        </div>

        <h2 class="section-title">Portfolio Allocation (100%)</h2>
        <div class="portfolio-allocation">
            <div class="allocation-bar" id="allocationBar"></div>
            <div id="allocationLegend" style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 0.85rem;"></div>
        </div>

        <h2 class="section-title">30-Day Recommendation History</h2>
        <div class="history-section">
            <div class="chart-container">
                <canvas id="historyChart"></canvas>
            </div>
        </div>

        <div id="recommendations"></div>

        <h2 class="section-title">Historical Data Log</h2>
        <div class="history-section">
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Total Buy</th>
                        <th>Changes</th>
                        <th>Top Picks</th>
                    </tr>
                </thead>
                <tbody id="historyLog"></tbody>
            </table>
        </div>

        <footer>
            <p>Generated by Claude AI</p>
            <p>Data refreshes daily. History retained 30 days.</p>
            <p style="margin-top: 10px; color: #a44; font-size: 0.75rem;">
                Not financial advice.
            </p>
        </footer>
    </div>

    <script>
        // Load recommendations from JSON file
        // For local file:// access, data is embedded below
        // For server deployment, uncomment fetch() and remove embedded data

        /*
        // Server deployment version - uncomment this block
        async function loadData() {
            try {
                const response = await fetch('data/recommendations.json');
                const jsonData = await response.json();
                return {
                    timestamp: jsonData.metadata.lastUpdated,
                    recommendations: jsonData.recommendations
                };
            } catch (error) {
                console.error('Error loading data:', error);
                return null;
            }
        }
        */

        // Current recommendations data - UPDATE THIS DAILY (or use JSON file)
        const currentData = {
            timestamp: "2026-02-03T21:30:00Z",
            recommendations: [
                // AI Infrastructure
                {
                    ticker: "NVDA",
                    name: "Nvidia Corporation",
                    category: "AI Infrastructure",
                    recommendation: "BUY",
                    allocation: 14,
                    conviction: 8,
                    priceTarget: "$253-352",
                    currentPrice: "$179.30",
                    upside: "41-96%",
                    risks: [
                        "China export restrictions ($9B revenue at risk)",
                        "Hyperscaler custom silicon competition (TPUs, Trainium)",
                        "Stock 15% below ATH; needs Vera Rubin execution"
                    ],
                    justification: "80%+ AI GPU market share; Vera Rubin launch H2 2026 with 5x inference perf; PEG 0.73; 39 Buy ratings"
                },
                {
                    ticker: "AVGO",
                    name: "Broadcom Inc",
                    category: "AI Infrastructure",
                    recommendation: "BUY",
                    allocation: 11,
                    conviction: 7,
                    priceTarget: "$423-475",
                    currentPrice: "$310",
                    upside: "37-53%",
                    risks: [
                        "VMware customer backlash (100%+ price hikes)",
                        "Customer concentration (Google, Meta, ByteDance, OpenAI)",
                        "Stock down 25% from ATH; volatile"
                    ],
                    justification: "$73B AI backlog; AI revenue +150% YoY to $50B in FY26; 60% ASIC market share; 34x forward P/E"
                },
                {
                    ticker: "MRVL",
                    name: "Marvell Technology",
                    category: "AI Infrastructure",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 6,
                    priceTarget: "$110-150",
                    currentPrice: "$74",
                    upside: "49-103%",
                    risks: [
                        "Customer concentration (AWS, Microsoft)",
                        "Unconfirmed reports of Trainium 3/4 losses to Alchip",
                        "Still GAAP unprofitable; high beta (1.97)"
                    ],
                    justification: "39% below 52-week high; PEG 0.76; 5-year AWS deal secured; AI revenue doubling to $2.5B+"
                },
                {
                    ticker: "ALAB",
                    name: "Astera Labs",
                    category: "AI Infrastructure",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 7,
                    priceTarget: "$187-275",
                    currentPrice: "$157",
                    upside: "19-75%",
                    risks: [
                        "Premium valuation (35-42x P/S vs 5.6x industry)",
                        "Competition from Broadcom, Marvell intensifying",
                        "Earnings Feb 10 - binary event risk"
                    ],
                    justification: "Morgan Stanley top small-cap pick; 104% revenue growth; Scorpio fabric switches launching Q1-Q2 2026"
                },
                // Big Tech AI
                {
                    ticker: "META",
                    name: "Meta Platforms",
                    category: "Big Tech AI",
                    recommendation: "BUY",
                    allocation: 11,
                    conviction: 7,
                    priceTarget: "$822-859",
                    currentPrice: "$706",
                    upside: "16-22%",
                    risks: [
                        "$115-135B capex in 2026 (nearly doubled from 2025)",
                        "Reality Labs losing $24B/year; margin compression to 41%",
                        "EU regulatory fines; youth safety litigation"
                    ],
                    justification: "Q4 beat +24% YoY; Advantage+ at $60B run rate; cheapest Mag-7 at 22x forward P/E; 81 Buy ratings"
                },
                {
                    ticker: "AMZN",
                    name: "Amazon.com",
                    category: "Big Tech AI",
                    recommendation: "BUY",
                    allocation: 9,
                    conviction: 7,
                    priceTarget: "$285-305",
                    currentPrice: "$238",
                    upside: "20-28%",
                    risks: [
                        "AWS losing share to Azure (29% vs Azure catching up)",
                        "$125B+ capex with uncertain AI ROI",
                        "Capacity constraints limiting near-term revenue"
                    ],
                    justification: "AWS reaccelerating at 20.2%; Trainium3 ramping early 2026; $200B backlog; Bedrock multi-billion run rate"
                },
                {
                    ticker: "MSFT",
                    name: "Microsoft Corporation",
                    category: "Big Tech AI",
                    recommendation: "BUY",
                    allocation: 8,
                    conviction: 7,
                    priceTarget: "$575-629",
                    currentPrice: "$426",
                    upside: "35-48%",
                    risks: [
                        "Azure decelerating (40% to 37-38%)",
                        "OpenAI concentration (45% of $625B backlog)",
                        "$37.5B quarterly capex - record high"
                    ],
                    justification: "22% below ATH post-selloff; 15M Copilot seats (+160% YoY); $392B commercial RPO; 34 Buy ratings"
                },
                // Cybersecurity
                {
                    ticker: "CRWD",
                    name: "CrowdStrike Holdings",
                    category: "Cybersecurity",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 5,
                    priceTarget: "$551-580",
                    currentPrice: "$420",
                    upside: "31-38%",
                    risks: [
                        "Valuation still premium at 25-28x sales",
                        "Growth decelerating from 31% to 20-22%",
                        "Delta lawsuit and class actions pending"
                    ],
                    justification: "Net new ARR +73% YoY; Charlotte AI agentic SOC capabilities; 97% retention post-outage; 20% off highs"
                },
                {
                    ticker: "PANW",
                    name: "Palo Alto Networks",
                    category: "Cybersecurity",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 6,
                    priceTarget: "$226-250",
                    currentPrice: "$175",
                    upside: "29-43%",
                    risks: [
                        "$25B CyberArk deal adds $15B debt",
                        "13.5% shareholder dilution from deal",
                        "Growth decelerated to 14-16%"
                    ],
                    justification: "XSIAM ARR +200% YoY; IBM QRadar migration deadline Apr 2026; 21% below 52-week high; half of CRWD valuation"
                },
                {
                    ticker: "ZS",
                    name: "Zscaler",
                    category: "Cybersecurity",
                    recommendation: "BUY",
                    allocation: 6,
                    conviction: 7,
                    priceTarget: "$317-325",
                    currentPrice: "$201",
                    upside: "58-62%",
                    risks: [
                        "Premium valuation (75-91x forward P/E)",
                        "Competition from CRWD and PANW platformization",
                        "Still GAAP unprofitable"
                    ],
                    justification: "Leading zero trust pure-play; RPO +35% YoY (accelerating); AI Security ARR hit $400M early; 40% below 52-week high"
                },
                {
                    ticker: "DDOG",
                    name: "Datadog",
                    category: "Cybersecurity",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 6,
                    priceTarget: "$185-225",
                    currentPrice: "$129",
                    upside: "43-74%",
                    risks: [
                        "OpenAI customer concentration ($170M ARR at risk)",
                        "Premium valuation (13x P/S, 56x forward P/E)",
                        "Earnings Feb 10 could disappoint"
                    ],
                    justification: "Best-in-class AI observability; Bits AI ranked #1 by Forrester; 36% below 52-week high; 50%+ upside to targets"
                },
                // AI Energy
                {
                    ticker: "VST",
                    name: "Vistra Corp",
                    category: "AI Energy",
                    recommendation: "BUY",
                    allocation: 7,
                    conviction: 7,
                    priceTarget: "$235-293",
                    currentPrice: "$156",
                    upside: "51-88%",
                    risks: [
                        "FERC regulatory risk on behind-the-meter deals",
                        "Stock down 29% from 52-week high",
                        "High leverage (3.36x D/E)"
                    ],
                    justification: "20-year Meta deal for 2,609MW nuclear; largest competitive fleet (41GW); 96% hedged for 2026; 10 Buy ratings"
                },
                {
                    ticker: "TLN",
                    name: "Talen Energy",
                    category: "AI Energy",
                    recommendation: "BUY",
                    allocation: 5,
                    conviction: 6,
                    priceTarget: "$455-576",
                    currentPrice: "$331",
                    upside: "37-74%",
                    risks: [
                        "High valuation (75x+ trailing P/E)",
                        "Susquehanna outage narrowed 2025 guidance",
                        "AWS concentration risk"
                    ],
                    justification: "$18B AWS deal through 2042; unanimous Strong Buy; front-of-meter structure de-risks FERC issues"
                },
                {
                    ticker: "VRT",
                    name: "Vertiv Holdings",
                    category: "AI Energy",
                    recommendation: "BUY",
                    allocation: 4,
                    conviction: 7,
                    priceTarget: "$190-230",
                    currentPrice: "$189",
                    upside: "1-22%",
                    risks: [
                        "Trading at all-time highs (limited near-term upside)",
                        "Valuation stretched at 65x trailing P/E",
                        "Dependent on hyperscaler capex cycle"
                    ],
                    justification: "$9.5B backlog; 60% order growth YoY; NVIDIA partnership on GB200 liquid cooling; potential S&P 500 inclusion"
                },
                // NO BUY Recommendations
                {
                    ticker: "MU",
                    name: "Micron Technology",
                    category: "AI Infrastructure",
                    recommendation: "NO BUY",
                    allocation: 0,
                    conviction: 6,
                    priceTarget: "$346-400",
                    currentPrice: "$437",
                    upside: "-9% to -21%",
                    risks: [
                        "Trading 18-26% ABOVE analyst targets",
                        "Up 224% in 12 months - priced for perfection",
                        "$20B capex signals cyclical peak risk"
                    ],
                    justification: "Excellent fundamentals but terrible entry. Q2 guide $18.7B/68% GM is priced in. Wait for $350-400."
                },
                {
                    ticker: "CCJ",
                    name: "Cameco Corporation",
                    category: "AI Energy",
                    recommendation: "NO BUY",
                    allocation: 0,
                    conviction: 5,
                    priceTarget: "$110-121",
                    currentPrice: "$126",
                    upside: "-4% to -13%",
                    risks: [
                        "Trading ABOVE most analyst targets",
                        "P/E of 117-138x vs peer average 71x",
                        "McArthur River production guidance cut"
                    ],
                    justification: "Strong long-term thesis but overvalued at $126. Wait for pullback to $90-105. Prefer VST/TLN for nuclear exposure."
                },
                {
                    ticker: "STX",
                    name: "Seagate Technology",
                    category: "AI Storage",
                    recommendation: "NO BUY",
                    allocation: 0,
                    conviction: 5,
                    priceTarget: "$333-417",
                    currentPrice: "$440",
                    upside: "-6% to -24%",
                    risks: [
                        "Up 600% from 52-week low; trading above targets",
                        "Capacity fully committed - limited upside surprise",
                        "Cyclical hardware at peak multiples"
                    ],
                    justification: "HAMR technology excellent but stock priced for perfection. Wait for pullback to $330-380."
                },
                {
                    ticker: "ORCL",
                    name: "Oracle Corporation",
                    category: "Enterprise Software",
                    recommendation: "NO BUY",
                    allocation: 0,
                    conviction: 7,
                    priceTarget: "$297-312",
                    currentPrice: "$160",
                    upside: "85% but high risk",
                    risks: [
                        "433-500% debt/equity ratio",
                        "OpenAI $300B deal creates binary outcome",
                        "Negative FCF projected through 2029"
                    ],
                    justification: "Balance sheet too risky. Potential junk credit downgrade. Wait for deleveraging or deal clarity."
                }
            ]
        };

        // Historical data storage (simulate 30 days)
        const historicalData = JSON.parse(localStorage.getItem('stockHistory') || '[]');

        // Add current data to history if new day
        function updateHistory() {
            const today = new Date().toISOString().split('T')[0];
            const existingEntry = historicalData.find(h => h.date === today);

            if (!existingEntry) {
                const buyCount = currentData.recommendations.filter(r => r.recommendation === 'BUY').length;
                const topPicks = currentData.recommendations
                    .filter(r => r.recommendation === 'BUY')
                    .sort((a, b) => b.allocation - a.allocation)
                    .slice(0, 3)
                    .map(r => r.ticker)
                    .join(', ');

                historicalData.unshift({
                    date: today,
                    timestamp: currentData.timestamp,
                    buyCount: buyCount,
                    noBuyCount: currentData.recommendations.length - buyCount,
                    topPicks: topPicks,
                    allocations: currentData.recommendations.reduce((acc, r) => {
                        acc[r.ticker] = r.allocation;
                        return acc;
                    }, {})
                });

                // Keep only 30 days
                if (historicalData.length > 30) {
                    historicalData.pop();
                }

                localStorage.setItem('stockHistory', JSON.stringify(historicalData));
            }
        }

        // Render functions
        function renderSummary() {
            const buyRecs = currentData.recommendations.filter(r => r.recommendation === 'BUY');
            const noBuyRecs = currentData.recommendations.filter(r => r.recommendation === 'NO BUY');
            const avgConviction = (currentData.recommendations.reduce((sum, r) => sum + r.conviction, 0) / currentData.recommendations.length).toFixed(1);

            document.getElementById('totalStocks').textContent = currentData.recommendations.length;
            document.getElementById('buyCount').textContent = buyRecs.length;
            document.getElementById('noBuyCount').textContent = noBuyRecs.length;
            document.getElementById('avgConviction').textContent = avgConviction + '/10';
            document.getElementById('lastUpdate').textContent = new Date(currentData.timestamp).toLocaleString();
        }

        function renderAllocationBar() {
            const buyRecs = currentData.recommendations
                .filter(r => r.recommendation === 'BUY' && r.allocation > 0)
                .sort((a, b) => b.allocation - a.allocation);

            const colors = [
                '#2a6', '#38c', '#c55', '#a5a', '#c82',
                '#5a8', '#68b', '#b66', '#8a5', '#6a9',
                '#a68', '#7b5', '#5a6', '#698'
            ];

            const bar = document.getElementById('allocationBar');
            const legend = document.getElementById('allocationLegend');

            bar.innerHTML = buyRecs.map((r, i) =>
                `<a href="#card-${r.ticker}" class="allocation-segment" style="width: ${r.allocation}%; background: ${colors[i % colors.length]}" title="${r.ticker}: ${r.allocation}%">
                    ${r.allocation >= 5 ? r.ticker : ''}
                </a>`
            ).join('');

            legend.innerHTML = buyRecs.map((r, i) =>
                `<a href="#card-${r.ticker}" style="text-decoration: none; color: inherit; cursor: pointer;"><span style="display: inline-block; width: 12px; height: 12px; background: ${colors[i % colors.length]}; border-radius: 3px; margin-right: 5px;"></span>${r.ticker}: ${r.allocation}%</a>`
            ).join('');
        }

        function renderRecommendations() {
            const container = document.getElementById('recommendations');
            const categories = [...new Set(currentData.recommendations.map(r => r.category))];

            const categoryIcons = {
                'AI Infrastructure': { icon: 'ðŸ¤–', class: 'cat-ai' },
                'Big Tech AI': { icon: 'ðŸ’»', class: 'cat-bigtech' },
                'Cybersecurity': { icon: 'ðŸ›¡ï¸', class: 'cat-cyber' },
                'AI Energy': { icon: 'âš¡', class: 'cat-energy' },
                'AI Storage': { icon: 'ðŸ’¾', class: 'cat-storage' },
                'Enterprise Software': { icon: 'ðŸ“Š', class: 'cat-bigtech' }
            };

            container.innerHTML = categories.map(category => {
                const catInfo = categoryIcons[category] || { icon: 'ðŸ“ˆ', class: 'cat-ai' };
                const stocks = currentData.recommendations.filter(r => r.category === category);

                return `
                    <div class="category-section">
                        <div class="category-header">
                            <div class="category-icon ${catInfo.class}">${catInfo.icon}</div>
                            <h2 class="section-title" style="margin: 0; border: none;">${category}</h2>
                        </div>
                        <div class="table-section">
                            <table class="recommendations-table">
                                <thead>
                                    <tr>
                                        <th>Ticker</th>
                                        <th>Signal</th>
                                        <th>Alloc</th>
                                        <th>Price</th>
                                        <th>Target</th>
                                        <th>Upside</th>
                                        <th>Conv</th>
                                        <th>Rationale</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${stocks.map(stock => `
                                        <tr id="card-${stock.ticker}">
                                            <td>
                                                <div class="stock-ticker">${stock.ticker}</div>
                                                <div class="stock-name">${stock.name}</div>
                                            </td>
                                            <td><span class="recommendation-badge badge-${stock.recommendation.toLowerCase().replace(' ', '')}">${stock.recommendation}</span></td>
                                            <td class="allocation-pct">${stock.allocation}%</td>
                                            <td class="price-cell">${stock.currentPrice}</td>
                                            <td class="target-cell">${stock.priceTarget}</td>
                                            <td class="${stock.upside.includes('-') ? 'upside-negative' : 'upside-positive'}">${stock.upside}</td>
                                            <td class="conviction-cell">${stock.conviction}/10</td>
                                            <td class="justification-cell">${stock.justification}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderHistoryChart() {
            const ctx = document.getElementById('historyChart').getContext('2d');

            // Generate sample historical data if not enough
            let chartData = historicalData.slice(0, 30);
            if (chartData.length < 7) {
                // Add sample data for visualization
                const sampleDates = [];
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    sampleDates.push({
                        date: date.toISOString().split('T')[0],
                        buyCount: 13 + Math.floor(Math.random() * 2),
                        noBuyCount: 5 - Math.floor(Math.random() * 2)
                    });
                }
                chartData = sampleDates;
            }

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.map(d => d.date).reverse(),
                    datasets: [
                        {
                            label: 'Buy Recommendations',
                            data: chartData.map(d => d.buyCount).reverse(),
                            borderColor: '#4a4',
                            backgroundColor: 'rgba(68, 170, 68, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'No Buy',
                            data: chartData.map(d => d.noBuyCount).reverse(),
                            borderColor: '#a44',
                            backgroundColor: 'rgba(170, 68, 68, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#777' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#777' },
                            grid: { color: '#2a2a2a' }
                        },
                        y: {
                            ticks: { color: '#777' },
                            grid: { color: '#2a2a2a' }
                        }
                    }
                }
            });
        }

        function renderHistoryLog() {
            const tbody = document.getElementById('historyLog');
            let logData = historicalData.slice(0, 10);

            if (logData.length === 0) {
                logData = [{
                    date: new Date().toISOString().split('T')[0],
                    buyCount: 13,
                    noBuyCount: 5,
                    topPicks: 'NVDA, AVGO, META'
                }];
            }

            tbody.innerHTML = logData.map((entry, i) => `
                <tr>
                    <td>${entry.date}</td>
                    <td><span class="buy-count">${entry.buyCount}</span></td>
                    <td>${i === 0 ? 'Current' : (entry.buyCount !== logData[i-1]?.buyCount ? 'â†‘â†“ Changed' : 'No change')}</td>
                    <td>${entry.topPicks || 'NVDA, AVGO, META'}</td>
                </tr>
            `).join('');
        }

        // Initialize
        updateHistory();
        renderSummary();
        renderAllocationBar();
        renderRecommendations();
        renderHistoryChart();
        renderHistoryLog();
    </script>
</body>
</html>
<!-- Tue Feb  3 18:53:56 PST 2026 -->
