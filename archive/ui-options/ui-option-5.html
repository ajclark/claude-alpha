<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Heatmap - Stock Recommendations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, #00d4ff, #00ff88, #ff6b35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #888;
            font-size: 1rem;
        }

        /* Summary Stats */
        .summary-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #00ff88;
        }

        .stat-value.negative {
            color: #ff4757;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
            margin-top: 5px;
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .legend-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-title {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .color-scale {
            display: flex;
            height: 20px;
            border-radius: 4px;
            overflow: hidden;
        }

        .color-scale div {
            width: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .conviction-scale {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .conviction-sample {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
            color: #aaa;
        }

        .conviction-box {
            width: 20px;
            height: 20px;
            background: #333;
            border-radius: 3px;
        }

        .conviction-box.low {
            border: 2px solid rgba(0, 212, 255, 0.3);
        }

        .conviction-box.medium {
            border: 3px solid rgba(0, 212, 255, 0.6);
            box-shadow: 0 0 5px rgba(0, 212, 255, 0.3);
        }

        .conviction-box.high {
            border: 4px solid rgba(0, 212, 255, 1);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 25px;
            transition: all 0.3s ease;
        }

        .main-layout.panel-closed {
            grid-template-columns: 1fr;
        }

        /* Treemap Container */
        .treemap-container {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .category-section {
            margin-bottom: 20px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .category-name {
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
        }

        .category-allocation {
            font-size: 0.85rem;
            color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .treemap-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        /* Stock Box */
        .stock-box {
            position: relative;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 10px;
        }

        .stock-box:hover {
            transform: scale(1.03);
            z-index: 10;
        }

        .stock-box.selected {
            transform: scale(1.05);
            z-index: 20;
        }

        .stock-box.no-buy {
            opacity: 0.5;
            filter: grayscale(0.5);
        }

        .stock-box.no-buy:hover {
            opacity: 0.8;
            filter: grayscale(0.2);
        }

        .stock-ticker {
            font-size: 1.4rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            line-height: 1.1;
        }

        .stock-ytd {
            font-size: 0.9rem;
            font-weight: 700;
            margin-top: 4px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .stock-eoy-target {
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 2px;
            opacity: 0.9;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .stock-allocation {
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 3px;
        }

        /* Side Panel */
        .side-panel {
            background: rgba(20, 20, 30, 0.95);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 25px;
            height: fit-content;
            max-height: calc(100vh - 300px);
            overflow-y: auto;
            position: sticky;
            top: 20px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .side-panel.hidden {
            opacity: 0;
            transform: translateX(50px);
            pointer-events: none;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .panel-ticker {
            font-size: 2rem;
            font-weight: 800;
        }

        .panel-name {
            font-size: 0.9rem;
            color: #888;
            margin-top: 4px;
        }

        .panel-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #888;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        .panel-close:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .panel-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .panel-badge.buy {
            background: linear-gradient(135deg, #00c853, #00e676);
            color: #000;
        }

        .panel-badge.no-buy {
            background: linear-gradient(135deg, #ff1744, #ff5252);
            color: #fff;
        }

        .panel-section {
            margin-bottom: 20px;
        }

        .panel-section-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #666;
            margin-bottom: 10px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .perf-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
        }

        .perf-value {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .perf-value.positive {
            color: #00ff88;
        }

        .perf-value.negative {
            color: #ff4757;
        }

        .perf-label {
            font-size: 0.7rem;
            color: #888;
            margin-top: 4px;
        }

        .conviction-meter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .conviction-bar-bg {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .conviction-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .conviction-value {
            font-size: 1rem;
            font-weight: 700;
            min-width: 35px;
        }

        .panel-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .panel-detail-label {
            color: #888;
            font-size: 0.85rem;
        }

        .panel-detail-value {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .panel-justification {
            background: rgba(0, 212, 255, 0.05);
            border-left: 3px solid #00d4ff;
            padding: 12px;
            border-radius: 0 8px 8px 0;
            font-size: 0.85rem;
            line-height: 1.5;
            color: #ccc;
        }

        .risk-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: #ff9f43;
        }

        .risk-icon {
            color: #ff6b6b;
            font-size: 0.9rem;
        }

        .wsb-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: rgba(255, 69, 0, 0.2);
            border: 1px solid rgba(255, 69, 0, 0.4);
            border-radius: 15px;
            font-size: 0.75rem;
            color: #ff4500;
            margin-top: 10px;
        }

        .wsb-badge.trending {
            background: rgba(255, 69, 0, 0.3);
            border-color: #ff4500;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 69, 0, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(255, 69, 0, 0); }
        }

        /* Empty State */
        .empty-panel {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .empty-panel-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .empty-panel-text {
            font-size: 0.9rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
            font-size: 0.8rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .side-panel {
                position: fixed;
                right: 0;
                top: 0;
                height: 100vh;
                max-height: 100vh;
                width: 380px;
                border-radius: 15px 0 0 15px;
                z-index: 1000;
            }

            .side-panel.hidden {
                transform: translateX(100%);
            }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .summary-stats {
                gap: 15px;
            }

            .stat-item {
                padding: 10px 15px;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .side-panel {
                width: 100%;
                border-radius: 15px 15px 0 0;
            }
        }

        /* Animation for boxes */
        .stock-box {
            animation: fadeInScale 0.4s ease forwards;
            opacity: 0;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Portfolio Heatmap</h1>
            <div class="subtitle">Visual allocation by performance | Click any stock for details</div>
        </div>

        <!-- Summary Stats -->
        <div class="summary-stats" id="summaryStats">
            <!-- Populated by JS -->
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-section">
                <span class="legend-title">YTD Performance</span>
                <div class="color-scale">
                    <div style="background: #8b0000;">-15%</div>
                    <div style="background: #dc143c;">-5%</div>
                    <div style="background: #444;">0%</div>
                    <div style="background: #228b22;">+10%</div>
                    <div style="background: #00ff00;">+20%</div>
                </div>
            </div>
            <div class="legend-section">
                <span class="legend-title">Box Size</span>
                <span style="color: #aaa; font-size: 0.8rem;">= Allocation %</span>
            </div>
            <div class="legend-section">
                <span class="legend-title">Conviction Level</span>
                <div class="conviction-scale">
                    <div class="conviction-sample">
                        <div class="conviction-box low"></div>
                        <span>Low</span>
                    </div>
                    <div class="conviction-sample">
                        <div class="conviction-box medium"></div>
                        <span>Med</span>
                    </div>
                    <div class="conviction-sample">
                        <div class="conviction-box high"></div>
                        <span>High</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="main-layout" id="mainLayout">
            <!-- Treemap -->
            <div class="treemap-container" id="treemapContainer">
                <!-- Populated by JS -->
            </div>

            <!-- Side Panel -->
            <div class="side-panel hidden" id="sidePanel">
                <div class="empty-panel" id="emptyPanel">
                    <div class="empty-panel-icon">&#9733;</div>
                    <div class="empty-panel-text">Click on any stock to see detailed information</div>
                </div>
                <div id="panelContent" style="display: none;"></div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Last updated: <span id="lastUpdated"></span> | Box sizes represent portfolio allocation | Colors indicate YTD performance</p>
        </div>
    </div>

    <script>
        // Enhanced stock data with YTD performance
        const stockData = {
            "metadata": {
                "lastUpdated": "2026-02-03T23:45:00Z",
                "generatedBy": "Claude AI",
                "version": "1.3",
                "totalAllocation": 100
            },
            "summary": {
                "totalStocks": 20,
                "buyCount": 14,
                "noBuyCount": 6,
                "averageConviction": 6.8,
                "topPicks": ["NVDA", "AVGO", "META"],
                "wsbTrending": ["NVDA", "META", "VST", "GOOGL"]
            },
            "portfolio": {
                "AI Infrastructure": 40,
                "Big Tech AI": 25,
                "AI Energy": 14,
                "Cybersecurity": 21,
                "AI Storage": 0
            },
            "recommendations": [
                {
                    "ticker": "NVDA",
                    "name": "Nvidia Corporation",
                    "category": "AI Infrastructure",
                    "recommendation": "BUY",
                    "allocation": 12,
                    "conviction": 8,
                    "currentPrice": "$179.30",
                    "priceTarget": "$255-352",
                    "upside": "42-96%",
                    "ytdGain": 12,
                    "eoyProjection": 45,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "63% positive sentiment; 113 mentions in 24hrs; perennial WSB favorite",
                    "risks": [
                        "China export restrictions ($4.5B charge taken; $50B market at risk)",
                        "Competition from AMD MI450 and custom silicon (TPUs, Trainium)",
                        "15% below ATH; needs Vera Rubin execution"
                    ],
                    "justification": "80%+ AI GPU share; Vera Rubin in production 2 quarters early; PEG 0.72; $500B revenue visibility; 38 Buy ratings"
                },
                {
                    "ticker": "AVGO",
                    "name": "Broadcom Inc",
                    "category": "AI Infrastructure",
                    "recommendation": "BUY",
                    "allocation": 10,
                    "conviction": 7,
                    "currentPrice": "$317",
                    "priceTarget": "$457-525",
                    "upside": "44-66%",
                    "ytdGain": 8,
                    "eoyProjection": 35,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "risks": [
                        "VMware customer exodus (36% already switching)",
                        "Customer concentration (Google, Meta, ByteDance, OpenAI, Anthropic)",
                        "24% below ATH; volatile post-earnings"
                    ],
                    "justification": "$73B AI backlog; AI revenue +100% YoY to $40B+ in FY26; 60-70% ASIC market share; 46 Buy ratings"
                },
                {
                    "ticker": "TSM",
                    "name": "Taiwan Semiconductor",
                    "category": "AI Infrastructure",
                    "recommendation": "BUY",
                    "allocation": 8,
                    "conviction": 8,
                    "currentPrice": "$332",
                    "priceTarget": "$392-450",
                    "upside": "18-35%",
                    "ytdGain": 5,
                    "eoyProjection": 40,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "wsbNote": "Strategic infrastructure play; 78% positive Reddit sentiment",
                    "risks": [
                        "Geopolitical Taiwan/China risk (60% capacity in Taiwan)",
                        "Customer concentration (Apple, Nvidia top customers)",
                        "Overseas fab execution challenges vs Taiwan efficiency"
                    ],
                    "justification": "90%+ advanced node market share; 30% FY26 revenue growth; 2nm in HVM; $52-56B capex; forward P/E 19-26x"
                },
                {
                    "ticker": "MRVL",
                    "name": "Marvell Technology",
                    "category": "AI Infrastructure",
                    "recommendation": "BUY",
                    "allocation": 5,
                    "conviction": 6,
                    "currentPrice": "$74",
                    "priceTarget": "$110-150",
                    "upside": "49-103%",
                    "ytdGain": -3,
                    "eoyProjection": 55,
                    "wsbMentions": "low",
                    "wsbSentiment": "mixed",
                    "wsbTrending": false,
                    "risks": [
                        "70%+ revenue tied to AWS/Microsoft (concentration risk)",
                        "Unconfirmed Trainium 3/4 losses to Alchip speculation",
                        "Still GAAP unprofitable; high beta (1.97)"
                    ],
                    "justification": "39% below 52-week high; PEG 0.12-0.79; 5-year AWS deal secured; AI >50% of data center revenue"
                },
                {
                    "ticker": "ALAB",
                    "name": "Astera Labs",
                    "category": "AI Infrastructure",
                    "recommendation": "BUY",
                    "allocation": 5,
                    "conviction": 7,
                    "currentPrice": "$157",
                    "priceTarget": "$191-275",
                    "upside": "22-75%",
                    "ytdGain": 15,
                    "eoyProjection": 48,
                    "wsbMentions": "low",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "risks": [
                        "Premium valuation (28x P/S vs 5.6x industry)",
                        "Competition from Broadcom, Marvell intensifying",
                        "Earnings Feb 10 - binary event risk"
                    ],
                    "justification": "Only PCIe Gen 6 provider; Scorpio fabric switches in production; 104% revenue growth; $20B TAM by 2030"
                },
                {
                    "ticker": "META",
                    "name": "Meta Platforms",
                    "category": "Big Tech AI",
                    "recommendation": "BUY",
                    "allocation": 10,
                    "conviction": 7,
                    "currentPrice": "$706",
                    "priceTarget": "$822-920",
                    "upside": "16-30%",
                    "ytdGain": 10,
                    "eoyProjection": 28,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "Strong retail support post-Q4 earnings beat; top trending on WSB",
                    "risks": [
                        "$115-135B capex in 2026 (nearly doubled from 2025)",
                        "Reality Labs losing ~$24B/year; margin compression to 41%",
                        "EU regulatory fines; youth safety litigation"
                    ],
                    "justification": "Q4 beat +24% YoY; Advantage+ at $60B run rate; cheapest Mag-7 at 22x forward P/E; 41 Buy ratings"
                },
                {
                    "ticker": "GOOGL",
                    "name": "Alphabet Inc",
                    "category": "Big Tech AI",
                    "recommendation": "BUY",
                    "allocation": 8,
                    "conviction": 7,
                    "currentPrice": "$339",
                    "priceTarget": "$370-385",
                    "upside": "9-14%",
                    "ytdGain": 7,
                    "eoyProjection": 22,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "WSB #4 pick for 2026; best-performing Mag-7 YTD; J.P. Morgan top pick",
                    "risks": [
                        "DOJ antitrust appeal (Feb 3 filed); potential remedies",
                        "AI competition from OpenAI/Microsoft intensifying",
                        "17% above historical P/E average"
                    ],
                    "justification": "Gemini 3 leading benchmarks; Cloud +40% growth potential; $155B backlog; forward P/E 27x; Q4 earnings Feb 4"
                },
                {
                    "ticker": "AMZN",
                    "name": "Amazon.com",
                    "category": "Big Tech AI",
                    "recommendation": "BUY",
                    "allocation": 7,
                    "conviction": 7,
                    "currentPrice": "$238",
                    "priceTarget": "$295-340",
                    "upside": "24-43%",
                    "ytdGain": 4,
                    "eoyProjection": 32,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "wsbNote": "WSB #1 pick for 2026; 76/100 sentiment score",
                    "risks": [
                        "AWS share loss to Azure (29% vs Azure catching up)",
                        "$150B+ capex in 2026 with uncertain AI ROI",
                        "Q4 earnings Feb 5 - AWS margin pressure"
                    ],
                    "justification": "AWS reaccelerating at 20%+; Trainium3 ramping; $200B backlog; Anthropic partnership could add $6B revenue"
                },
                {
                    "ticker": "CRWD",
                    "name": "CrowdStrike Holdings",
                    "category": "Cybersecurity",
                    "recommendation": "BUY",
                    "allocation": 5,
                    "conviction": 6,
                    "currentPrice": "$420",
                    "priceTarget": "$551-640",
                    "upside": "31-52%",
                    "ytdGain": 6,
                    "eoyProjection": 38,
                    "wsbMentions": "low",
                    "wsbSentiment": "mixed",
                    "wsbTrending": false,
                    "wsbNote": "Sentiment recovering post-July 2024 outage; 97% customer retention",
                    "risks": [
                        "Valuation premium at 25-28x sales",
                        "Growth decelerating from 31% to 20-22%",
                        "Delta lawsuit pending ($500M+ claim)"
                    ],
                    "justification": "Net new ARR +73% YoY (record); Charlotte AI agentic SOC; 97% retention post-outage; 35 Buy ratings"
                },
                {
                    "ticker": "PANW",
                    "name": "Palo Alto Networks",
                    "category": "Cybersecurity",
                    "recommendation": "BUY",
                    "allocation": 5,
                    "conviction": 6,
                    "currentPrice": "$175",
                    "priceTarget": "$227-265",
                    "upside": "30-51%",
                    "ytdGain": 3,
                    "eoyProjection": 35,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "wsbNote": "94/100 sentiment score despite low mentions",
                    "risks": [
                        "$25B CyberArk deal adds debt and dilution",
                        "109x trailing P/E is extreme premium",
                        "Integration execution risk"
                    ],
                    "justification": "XSIAM $1B+ bookings (fastest ever); IBM QRadar migration deadline Apr 2026; 21% below 52-week high"
                },
                {
                    "ticker": "ZS",
                    "name": "Zscaler",
                    "category": "Cybersecurity",
                    "recommendation": "BUY",
                    "allocation": 6,
                    "conviction": 7,
                    "currentPrice": "$201",
                    "priceTarget": "$319-390",
                    "upside": "59-94%",
                    "ytdGain": -5,
                    "eoyProjection": 65,
                    "wsbMentions": "low",
                    "wsbSentiment": "bearish",
                    "wsbTrending": false,
                    "wsbNote": "Contrarian indicator - retail bearish while institutions bullish",
                    "risks": [
                        "Premium valuation (75-91x forward P/E)",
                        "Competition from CRWD and PANW platformization",
                        "Still GAAP unprofitable"
                    ],
                    "justification": "Leading zero trust pure-play; RPO +35% YoY (accelerating); AI Security ARR $400M+; 40% below 52-week high"
                },
                {
                    "ticker": "DDOG",
                    "name": "Datadog",
                    "category": "Cybersecurity",
                    "recommendation": "BUY",
                    "allocation": 5,
                    "conviction": 6,
                    "currentPrice": "$130",
                    "priceTarget": "$175-225",
                    "upside": "35-73%",
                    "ytdGain": 2,
                    "eoyProjection": 42,
                    "wsbMentions": "low",
                    "wsbSentiment": "mixed",
                    "wsbTrending": false,
                    "risks": [
                        "OpenAI customer concentration ($170M+ ARR at risk)",
                        "Premium valuation (14x P/S, 56x forward P/E)",
                        "Earnings Feb 10 - guidance risk"
                    ],
                    "justification": "Best-in-class AI observability; Bits AI SRE agent; Rule of 40 score 78; 35% below 52-week high"
                },
                {
                    "ticker": "VST",
                    "name": "Vistra Corp",
                    "category": "AI Energy",
                    "recommendation": "BUY",
                    "allocation": 7,
                    "conviction": 7,
                    "currentPrice": "$158",
                    "priceTarget": "$237-293",
                    "upside": "50-85%",
                    "ytdGain": 18,
                    "eoyProjection": 58,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "Nuclear/data center energy play trending; Meta deal catalyst",
                    "risks": [
                        "FERC regulatory risk on behind-the-meter deals",
                        "29% below 52-week high; high volatility",
                        "High leverage (3.36x D/E); Altman Z-Score 1.8"
                    ],
                    "justification": "20-year Meta deal for 2,609MW nuclear; 41GW competitive fleet; 96% hedged for 2026; unanimous Buy ratings"
                },
                {
                    "ticker": "TLN",
                    "name": "Talen Energy",
                    "category": "AI Energy",
                    "recommendation": "BUY",
                    "allocation": 4,
                    "conviction": 6,
                    "currentPrice": "$331",
                    "priceTarget": "$455-576",
                    "upside": "37-74%",
                    "ytdGain": 14,
                    "eoyProjection": 52,
                    "wsbMentions": "low",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "risks": [
                        "High valuation (75x+ trailing P/E)",
                        "Spring 2026 Susquehanna outage during AWS transition",
                        "AWS concentration risk; $3.45B gas acquisition adds debt"
                    ],
                    "justification": "$18B AWS deal through 2042; front-of-meter structure de-risks FERC; PEG 0.52; 14 Buy ratings"
                },
                {
                    "ticker": "VRT",
                    "name": "Vertiv Holdings",
                    "category": "AI Energy",
                    "recommendation": "BUY",
                    "allocation": 3,
                    "conviction": 6,
                    "currentPrice": "$190",
                    "priceTarget": "$208-225",
                    "upside": "9-18%",
                    "ytdGain": 9,
                    "eoyProjection": 18,
                    "wsbMentions": "low",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "wsbNote": "70/100 neutral sentiment; not a WSB play",
                    "risks": [
                        "Trading near all-time highs (limited near-term upside)",
                        "65x trailing P/E is stretched valuation",
                        "Dependent on hyperscaler capex cycle"
                    ],
                    "justification": "$9.5B backlog; 60% order growth YoY; NVIDIA GB200 liquid cooling partnership; earnings Feb 11"
                },
                {
                    "ticker": "MU",
                    "name": "Micron Technology",
                    "category": "AI Infrastructure",
                    "recommendation": "NO BUY",
                    "allocation": 0,
                    "conviction": 6,
                    "currentPrice": "$437",
                    "priceTarget": "$320-400",
                    "upside": "-8% to -27%",
                    "ytdGain": 22,
                    "eoyProjection": -15,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "Extremely bullish retail sentiment; viral YOLO success stories; retail often late to memory cycles",
                    "risks": [
                        "Trading 18-37% ABOVE analyst targets",
                        "Up 247% in 12 months - priced for perfection",
                        "$20B capex signals potential cyclical peak"
                    ],
                    "justification": "Excellent HBM fundamentals but terrible entry. Q2 guide $18.7B/68% GM is priced in. Wait for $350-400."
                },
                {
                    "ticker": "ASML",
                    "name": "ASML Holding",
                    "category": "AI Infrastructure",
                    "recommendation": "NO BUY",
                    "allocation": 0,
                    "conviction": 6,
                    "currentPrice": "$1,381",
                    "priceTarget": "$1,475-1,572",
                    "upside": "7-14%",
                    "ytdGain": 4,
                    "eoyProjection": 8,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "WSB mentions up 200% recently; 86% positive sentiment; monopoly narrative strong",
                    "risks": [
                        "China revenue dropping from 33% to 20% in 2026",
                        "P/E of 47-56x is 40% above 10-year average",
                        "Near ATH with limited upside to analyst targets"
                    ],
                    "justification": "Monopoly position excellent but wait for better entry. Record EUR 38.8B backlog priced in. Target $1,100-1,250."
                },
                {
                    "ticker": "RKLB",
                    "name": "Rocket Lab USA",
                    "category": "Aerospace",
                    "recommendation": "NO BUY",
                    "allocation": 0,
                    "conviction": 6,
                    "currentPrice": "$78",
                    "priceTarget": "$69-90",
                    "upside": "-12% to +15%",
                    "ytdGain": 25,
                    "eoyProjection": -8,
                    "wsbMentions": "high",
                    "wsbSentiment": "bullish",
                    "wsbTrending": true,
                    "wsbNote": "WSB #2 pick for 2026; space hype play; retail favorite",
                    "risks": [
                        "Trading ABOVE median analyst target of $69-72",
                        "Extreme valuation at 90x P/S",
                        "SpaceX can undercut Neutron pricing; -$220M annual cash burn"
                    ],
                    "justification": "Excellent company but WSB momentum already priced in after 172%+ rally. Wait for $55-65 or Neutron success."
                },
                {
                    "ticker": "CCJ",
                    "name": "Cameco Corporation",
                    "category": "AI Energy",
                    "recommendation": "NO BUY",
                    "allocation": 0,
                    "conviction": 5,
                    "currentPrice": "$126",
                    "priceTarget": "$110-121",
                    "upside": "-4% to -13%",
                    "ytdGain": 11,
                    "eoyProjection": -6,
                    "wsbMentions": "medium",
                    "wsbSentiment": "bullish",
                    "wsbTrending": false,
                    "wsbNote": "Uranium/nuclear hype; retail sentiment diverges from valuation reality",
                    "risks": [
                        "Trading ABOVE most analyst targets",
                        "P/E of 117-138x vs peer average 71x",
                        "McArthur River production guidance cut"
                    ],
                    "justification": "Strong long-term thesis but overvalued. Wait for pullback to $90-105. Prefer VST/TLN for nuclear exposure."
                },
                {
                    "ticker": "STX",
                    "name": "Seagate Technology",
                    "category": "AI Storage",
                    "recommendation": "NO BUY",
                    "allocation": 0,
                    "conviction": 5,
                    "currentPrice": "$440",
                    "priceTarget": "$333-417",
                    "upside": "-5% to -24%",
                    "ytdGain": 8,
                    "eoyProjection": -12,
                    "wsbMentions": "low",
                    "wsbSentiment": "none",
                    "wsbTrending": false,
                    "risks": [
                        "Up 600% from 52-week low; trading above targets",
                        "Capacity fully committed - limited upside surprise",
                        "Cyclical hardware at peak multiples"
                    ],
                    "justification": "HAMR technology excellent but stock priced for perfection. Wait for pullback to $330-380."
                }
            ]
        };

        // Get color based on YTD performance
        function getPerformanceColor(ytd) {
            if (ytd >= 20) return '#00ff00';
            if (ytd >= 15) return '#32cd32';
            if (ytd >= 10) return '#228b22';
            if (ytd >= 5) return '#006400';
            if (ytd >= 0) return '#444444';
            if (ytd >= -5) return '#8b0000';
            if (ytd >= -10) return '#b22222';
            return '#dc143c';
        }

        // Get conviction styles (border and glow)
        function getConvictionStyles(conviction) {
            const intensity = conviction / 10;
            const borderWidth = 2 + (conviction - 5) * 0.8;
            const glowIntensity = Math.max(0, (conviction - 5) * 4);

            return {
                border: `${borderWidth}px solid rgba(0, 212, 255, ${0.3 + intensity * 0.7})`,
                boxShadow: glowIntensity > 0 ? `0 0 ${glowIntensity}px rgba(0, 212, 255, ${intensity * 0.6})` : 'none'
            };
        }

        // Calculate box size based on allocation
        function getBoxSize(allocation) {
            const baseSize = 80;
            const scale = Math.sqrt(allocation / 5);
            const width = Math.max(90, baseSize * scale * 1.2);
            const height = Math.max(90, baseSize * scale);
            return { width, height };
        }

        // Group stocks by category
        function groupByCategory(recommendations) {
            const groups = {};
            recommendations.forEach(stock => {
                if (!groups[stock.category]) {
                    groups[stock.category] = [];
                }
                groups[stock.category].push(stock);
            });

            // Sort within each category by allocation (highest first)
            Object.keys(groups).forEach(cat => {
                groups[cat].sort((a, b) => b.allocation - a.allocation);
            });

            return groups;
        }

        // Render summary stats
        function renderSummaryStats() {
            const buyStocks = stockData.recommendations.filter(s => s.recommendation === 'BUY');
            const avgYtd = buyStocks.reduce((sum, s) => sum + s.ytdGain, 0) / buyStocks.length;
            const avgEoyProjection = buyStocks.reduce((sum, s) => sum + s.eoyProjection, 0) / buyStocks.length;

            const container = document.getElementById('summaryStats');
            container.innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">${stockData.summary.buyCount}</div>
                    <div class="stat-label">Active Positions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value ${avgYtd >= 0 ? '' : 'negative'}">${avgYtd >= 0 ? '+' : ''}${avgYtd.toFixed(1)}%</div>
                    <div class="stat-label">Avg YTD (Portfolio)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" style="color: #00d4ff;">+${avgEoyProjection.toFixed(1)}%</div>
                    <div class="stat-label">Avg EOY Projection</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" style="color: #ffd700;">${stockData.summary.averageConviction.toFixed(1)}</div>
                    <div class="stat-label">Avg Conviction</div>
                </div>
            `;
        }

        // Render treemap
        function renderTreemap() {
            const container = document.getElementById('treemapContainer');
            const groups = groupByCategory(stockData.recommendations);

            // Define category order
            const categoryOrder = ['AI Infrastructure', 'Big Tech AI', 'Cybersecurity', 'AI Energy', 'AI Storage', 'Aerospace'];

            let html = '';
            let animationDelay = 0;

            categoryOrder.forEach(category => {
                const stocks = groups[category];
                if (!stocks || stocks.length === 0) return;

                const categoryAllocation = stockData.portfolio[category] || 0;

                html += `
                    <div class="category-section">
                        <div class="category-header">
                            <span class="category-name">${category}</span>
                            <span class="category-allocation">${categoryAllocation}% allocation</span>
                        </div>
                        <div class="treemap-grid">
                `;

                stocks.forEach(stock => {
                    const size = getBoxSize(stock.allocation > 0 ? stock.allocation : 3);
                    const bgColor = getPerformanceColor(stock.ytdGain);
                    const convictionStyles = getConvictionStyles(stock.conviction);
                    const isNoBuy = stock.recommendation === 'NO BUY';

                    html += `
                        <div class="stock-box ${isNoBuy ? 'no-buy' : ''}"
                             data-ticker="${stock.ticker}"
                             style="
                                width: ${size.width}px;
                                height: ${size.height}px;
                                background: linear-gradient(135deg, ${bgColor}, ${adjustColor(bgColor, -30)});
                                border: ${convictionStyles.border};
                                box-shadow: ${convictionStyles.boxShadow};
                                animation-delay: ${animationDelay}ms;
                             "
                             onclick="selectStock('${stock.ticker}')">
                            <div class="stock-ticker">${stock.ticker}</div>
                            <div class="stock-ytd" style="color: ${stock.ytdGain >= 0 ? '#fff' : '#ffcccc'}">
                                ${stock.ytdGain >= 0 ? '+' : ''}${stock.ytdGain}%
                            </div>
                            <div class="stock-eoy-target" style="color: ${stock.eoyProjection >= 0 ? '#90EE90' : '#ff9999'}" title="Expected total gain from current price to end of 2026">
                                EOY: ${stock.eoyProjection >= 0 ? '+' : ''}${stock.eoyProjection}%
                            </div>
                            ${stock.allocation > 0 ? `<div class="stock-allocation">${stock.allocation}%</div>` : ''}
                        </div>
                    `;
                    animationDelay += 50;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Adjust color brightness
        function adjustColor(color, amount) {
            const hex = color.replace('#', '');
            const r = Math.max(0, Math.min(255, parseInt(hex.substr(0, 2), 16) + amount));
            const g = Math.max(0, Math.min(255, parseInt(hex.substr(2, 2), 16) + amount));
            const b = Math.max(0, Math.min(255, parseInt(hex.substr(4, 2), 16) + amount));
            return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
        }

        // Get conviction color
        function getConvictionColor(conviction) {
            if (conviction >= 8) return '#00ff88';
            if (conviction >= 7) return '#00d4ff';
            if (conviction >= 6) return '#ffd700';
            return '#ff9f43';
        }

        // Select stock and show panel
        let selectedTicker = null;

        function selectStock(ticker) {
            const stock = stockData.recommendations.find(s => s.ticker === ticker);
            if (!stock) return;

            // Update selection state
            document.querySelectorAll('.stock-box').forEach(box => {
                box.classList.remove('selected');
                if (box.dataset.ticker === ticker) {
                    box.classList.add('selected');
                }
            });

            selectedTicker = ticker;

            // Show panel
            const panel = document.getElementById('sidePanel');
            const emptyPanel = document.getElementById('emptyPanel');
            const panelContent = document.getElementById('panelContent');

            panel.classList.remove('hidden');
            emptyPanel.style.display = 'none';
            panelContent.style.display = 'block';

            const convictionColor = getConvictionColor(stock.conviction);
            const ytdColor = stock.ytdGain >= 0 ? 'positive' : 'negative';
            const eoyColor = stock.eoyProjection >= 0 ? 'positive' : 'negative';

            panelContent.innerHTML = `
                <div class="panel-header">
                    <div>
                        <div class="panel-ticker" style="color: ${getPerformanceColor(stock.ytdGain)}">${stock.ticker}</div>
                        <div class="panel-name">${stock.name}</div>
                    </div>
                    <button class="panel-close" onclick="closePanel()">&times;</button>
                </div>

                <div class="panel-badge ${stock.recommendation === 'BUY' ? 'buy' : 'no-buy'}">
                    ${stock.recommendation}
                </div>

                <div class="panel-section">
                    <div class="panel-section-title">Performance</div>
                    <div class="performance-grid">
                        <div class="perf-item">
                            <div class="perf-value ${ytdColor}">${stock.ytdGain >= 0 ? '+' : ''}${stock.ytdGain}%</div>
                            <div class="perf-label">YTD Gain (Actual)</div>
                        </div>
                        <div class="perf-item">
                            <div class="perf-value ${eoyColor}">${stock.eoyProjection >= 0 ? '+' : ''}${stock.eoyProjection}%</div>
                            <div class="perf-label">2026 EOY Target</div>
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-section-title">Conviction Level</div>
                    <div class="conviction-meter">
                        <div class="conviction-bar-bg">
                            <div class="conviction-bar-fill" style="width: ${stock.conviction * 10}%; background: linear-gradient(90deg, ${convictionColor}, ${adjustColor(convictionColor, 30)})"></div>
                        </div>
                        <div class="conviction-value" style="color: ${convictionColor}">${stock.conviction}/10</div>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-detail-row">
                        <span class="panel-detail-label">Category</span>
                        <span class="panel-detail-value">${stock.category}</span>
                    </div>
                    <div class="panel-detail-row">
                        <span class="panel-detail-label">Allocation</span>
                        <span class="panel-detail-value">${stock.allocation}%</span>
                    </div>
                    <div class="panel-detail-row">
                        <span class="panel-detail-label">Current Price</span>
                        <span class="panel-detail-value">${stock.currentPrice}</span>
                    </div>
                    <div class="panel-detail-row">
                        <span class="panel-detail-label">Price Target</span>
                        <span class="panel-detail-value">${stock.priceTarget}</span>
                    </div>
                    <div class="panel-detail-row">
                        <span class="panel-detail-label">Upside</span>
                        <span class="panel-detail-value" style="color: ${stock.upside.includes('-') ? '#ff4757' : '#00ff88'}">${stock.upside}</span>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-section-title">Investment Thesis</div>
                    <div class="panel-justification">${stock.justification}</div>
                </div>

                <div class="panel-section">
                    <div class="panel-section-title">Key Risks</div>
                    ${stock.risks.map(risk => `
                        <div class="risk-item">
                            <span class="risk-icon">&#9888;</span>
                            <span>${risk}</span>
                        </div>
                    `).join('')}
                </div>

                ${stock.wsbTrending || stock.wsbMentions !== 'low' ? `
                    <div class="wsb-badge ${stock.wsbTrending ? 'trending' : ''}">
                        <span>&#128640;</span>
                        <span>WSB: ${stock.wsbSentiment} | ${stock.wsbMentions} mentions ${stock.wsbTrending ? '| TRENDING' : ''}</span>
                    </div>
                    ${stock.wsbNote ? `<div style="font-size: 0.75rem; color: #888; margin-top: 8px; font-style: italic;">${stock.wsbNote}</div>` : ''}
                ` : ''}
            `;
        }

        function closePanel() {
            const panel = document.getElementById('sidePanel');
            panel.classList.add('hidden');

            document.querySelectorAll('.stock-box').forEach(box => {
                box.classList.remove('selected');
            });
            selectedTicker = null;
        }

        // Initialize
        function init() {
            renderSummaryStats();
            renderTreemap();

            // Set last updated
            const date = new Date(stockData.metadata.lastUpdated);
            document.getElementById('lastUpdated').textContent = date.toLocaleString();
        }

        // Run on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
